###### General
set-window-option -g mode-keys vi
set -g base-index 1
unbind C-b
unbind C-k
set -g prefix C-j
bind -n C-x send-prefix
set -g status-interval 1
setw -g aggressive-resize on
set -sg escape-time 0
set-option -g history-limit 100000
set -g default-terminal "screen-256color"

bind-key r command-prompt -p ":source ~/.tmux.conf"

###### Copy Mode
bind Space copy-mode
bind C-Space copy-mode
bind-key -n M-PPage copy-mode -u
bind-key -n M-u copy-mode

###### Panes 
# Defaults:
# bind " split-window -v
# bind % split-window -h
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind | select-layout even-horizontal
bind = select-layout even-vertical
bind-key -nr    M-Up resize-pane -U
bind-key -nr  M-Down resize-pane -D
bind-key -nr  M-Left resize-pane -L
bind-key -nr M-Right resize-pane -R
bind-key b break-pane -dP
#bind-key j command-prompt -p "join pane from:"  "join-pane -vs '%1'"
set-option -g pane-border-fg cyan
set-option -g pane-active-border-fg blue

###### Windows
bind-key -n M-h previous-window
bind-key -n M-l next-window

###### Sessions
# refresh-client so that status bar is updated
bind-key -n M-H switch-client -p\; refresh-client -S
bind-key -n M-L switch-client -n\; refresh-client -S

# Use this script to print out available tmux colors: 
#
# for i in {0..255} ; do
#     printf "\x1b[38;5;${i}mcolour${i}\n"
# done

###### Status Line
set-option -g renumber-windows on
set-option -g message-bg default
set-option -g message-fg white
set-option -g status-bg default
set-option -g status-fg white

# set-window-option -g window-status-current-attr bold
# set-window-option -g window-status-fg green
# set-window-option -g window-status-current-fg black
# setw -g window-status-format "#[bg=default]#[fg=blue] #I #W "
# setw -g window-status-current-format "#[fg=colour214] [ #[fg=green]#I #W #[fg=colour214]]"
set -g status-left-length 100
set -g status-justify centre
#set -g status-left "#[fg=colour10] #[bg=default]#[fg=colour213] [%m.%d.%y] #[fg=colour123] %I:%M:%S #[fg=colour10] "
# Will be strange for tmux version < 2.2
#set -g status-right "#[fg=colour214]#{battery_percentage} #[fg=colour211]#{battery_remain}#[fg=colour214] #[fg=green]  #[fg=blue]#(tmux ls | grep attached | cut -d ' ' -f 1 | cut -d ':' -f 1)#[fg=green]  "

###### Mouse Support
set -g mouse on
#set -g mode-mouse on
#set -g mouse-resize-pane on
#set -g mouse-select-pane on
#set -g mouse-select-window on

# set -g @nord_tmux_show_status_content "0"
set -g @nord_tmux_no_patched_font "1"

###### Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'arcticicestudio/nord-tmux'
set -g @continuum-restore 'on'
run '~/.tmux/plugins/tpm/tpm' # Should always be last
